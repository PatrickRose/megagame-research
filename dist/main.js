!function(e){var t={};function r(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t){e.exports=React},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(2),s=r(0);class n extends s.Component{render(){let e;switch(this.props.value){case a.Suit.LEAF:e="fa-leaf";break;case a.Suit.BRAIN:e="fa-brain";break;case a.Suit.COG:e="fa-cog";break;case a.Suit.MATH:e="fa-square-root-alt"}return s.createElement("span",{className:"fas "+e},this.props.value)}}t.Suit=n},function(e,t,r){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.LEAF="LEAF",e.BRAIN="BRAIN",e.COG="COG",e.MATH="MATH"}(a=t.Suit||(t.Suit={})),t.ALL_SUITS=[a.BRAIN,a.COG,a.LEAF,a.MATH]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(1),s=r(0);var n,i;!function(e){e[e.BASE=0]="BASE",e[e.NO_SINGLE=1]="NO_SINGLE"}(n=t.CardType||(t.CardType={})),function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e[e.NULL=2]="NULL"}(i=t.PairType||(t.PairType={}));class l extends s.Component{getSuit(){return this.props.suit}validInPair(e){for(let t of e)if(t.getSuit()!=this.getSuit())return!1;return this.validationMethod(e)}render(){return s.createElement("div",{className:"card-wrapper"},s.createElement("div",{className:"card"},s.createElement("div",{className:"card-body"},s.createElement("div",{className:"card-title"},s.createElement("span",{className:"card-value"},this.props.value),s.createElement(a.Suit,{value:this.props.suit})),s.createElement("div",{className:"card-text"},this.getExtraText())),s.createElement("div",{className:"card-footer"},this.renderButtons())))}validationMethod(e){return!0}getExtraText(){return""}renderButtons(){return s.createElement("div",{className:"btn-group"},s.createElement("button",{className:"btn btn-secondary"+(this.props.inPair==i.LEFT?" active":""),disabled:this.props.inPair==i.LEFT,onClick:()=>{this.props.pairSelect(i.LEFT)}},"Left"),s.createElement("button",{className:"btn btn-secondary"+(this.props.inPair==i.NULL?" active":""),disabled:this.props.inPair==i.NULL,onClick:()=>{this.props.pairSelect(i.NULL)}},"No pair"),s.createElement("button",{className:"btn btn-secondary"+(this.props.inPair==i.RIGHT?" active":""),disabled:this.props.inPair==i.RIGHT,onClick:()=>{this.props.pairSelect(i.RIGHT)}},"Right"))}static createFromDef(e,t=(()=>{})){let r=Object.assign(Object.assign({},e),{pairSelect:t});switch(e.type){case n.NO_SINGLE:return new c(r);case n.BASE:return new l(r);default:throw new Error("Unknown cardtype "+e.type)}}}t.Card=l;class c extends l{validationMethod(e){return e.length>0}getExtraText(){return"No single"}}t.NoSingle=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(0),s=r(5),n=r(6);s.render(a.createElement(n.Board,null),document.getElementById("example"))},function(e,t){e.exports=ReactDOM},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(0),s=r(3),n=r(2),i=r(7),l=r(8);class c{constructor(e,t,r){this.suit=e,this.noSingle=t,this.allowSingle=r}makeCards(){return[].concat(this.noSingle.map(e=>({value:e,suit:this.suit,inPair:s.PairType.NULL,type:s.CardType.NO_SINGLE})),this.allowSingle.map(e=>({value:e,suit:this.suit,inPair:s.PairType.NULL,type:s.CardType.BASE})))}}class o extends a.Component{render(){return a.createElement("div",{className:"hand"},this.props.value.map((e,t)=>{switch(e.type){case s.CardType.BASE:return a.createElement(s.Card,{value:e.value,suit:e.suit,inPair:e.inPair,pairSelect:e=>{this.props.selectCard(e,t)},key:t});case s.CardType.NO_SINGLE:return a.createElement(s.NoSingle,{value:e.value,suit:e.suit,inPair:e.inPair,pairSelect:e=>{this.props.selectCard(e,t)},key:t});default:throw new Error("Unknown card type")}}))}}const u=6;class d extends a.Component{constructor(e){super(e);let t=this.getStartingState();this.state=t}getStartingState(e=d.BasicDeck()){for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}let t=e.slice(0,u);return{deck:e.slice(u),hand:t,pairs:[],discards:[],leftPair:[],rightPair:[]}}discardHand(){this.drawCards(this.state.hand.length+1,!0)}render(){return this.state.hand.length>0?this.inProgressRender():this.gameOverRender()}inProgressRender(){return a.createElement("div",null,a.createElement("h2",null,"Cards left in deck: ",this.state.deck.length),a.createElement(o,{value:this.state.hand,selectCard:(e,t)=>this.selectCard(e,t)}),a.createElement("div",{className:"btn-group"},this.renderDiscardButton(),this.renderMakePairButton()),this.renderPairs())}static BasicDeck(){const e=new c(n.Suit.BRAIN,[1,1,2,2,3],[3,3,4,5,6,10]),t=new c(n.Suit.COG,[1,1,2],[1,2,3,4,4,5,7]),r=new c(n.Suit.LEAF,[1,2,3,4],[2,5,6]),a=new c(n.Suit.MATH,[1,2],[1,1,1,2,2,2,3,3,3,4,4,5,6,8]);return[].concat(a.makeCards(),r.makeCards(),t.makeCards(),e.makeCards())}drawCards(e,t=!1){let r=this.state.deck.slice(),a=this.state.hand.slice(),s=this.state.discards.slice();if(t&&(s.push(...a),a=[]),r.length<e)a.push(...r),r=[];else for(let t=0;t<e;t++)a.push(r.pop());this.setState({deck:r,hand:a,discards:s})}renderDiscardButton(){return a.createElement("button",{className:"btn btn-secondary",onClick:()=>{this.discardHand()}},0==this.state.deck.length?"Discard hand and end game":"Discard hand")}renderMakePairButton(){const e=this.generatePair(s.PairType.LEFT),t=this.generatePair(s.PairType.RIGHT),r=i.Pair.valueOfPair(t),n=i.Pair.valueOfPair(e);let l;switch(!0){case 0==e.length:l="No cards selected for left side of pair";break;case 0==t.length:l="No cards selected for right side of pair";break;case!i.Pair.validateSet(e):l="Left side of pair is invalid";break;case!i.Pair.validateSet(t):l="Right side of pair is invalid";break;case r!=n:l="Pair values don't match (left: "+n+", right: "+r+")";break;default:l="Make pair"}return a.createElement("button",{onClick:()=>{this.makePair()},disabled:"Make pair"!=l,className:"btn btn-primary"},l)}generatePair(e){return this.state.hand.filter(t=>t.inPair==e)}selectCard(e,t){let r=this.state.hand.slice();r[t].inPair=e,this.setState({hand:r})}makePair(){const e=this.generatePair(s.PairType.LEFT),t=this.generatePair(s.PairType.RIGHT);let r=this.state.pairs.slice(),a={left:e,right:t};e[0].suit==t[0].suit&&(a.scores={basic:t[0].suit},e.length==t.length&&(a.scores.bonus=t[0].suit)),r.push(a);let n=this.state.hand.slice().filter(e=>e.inPair==s.PairType.NULL);this.setState({hand:n,pairs:r},()=>{this.drawCards(2)})}renderPairs(){return a.createElement("table",{className:"table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Left Side"),a.createElement("th",null,"Right Side"))),a.createElement("tbody",null,this.state.pairs.map((e,t)=>a.createElement(i.Pair,{leftPair:e.left,rightPair:e.right,key:t}))))}restart(){this.setState(this.getStartingState())}gameOverRender(){return a.createElement("div",null,a.createElement("h2",null,"Game over!"),a.createElement("button",{className:"btn btn-primary",onClick:()=>{this.restart()}},"Play again?"),this.renderScore(),a.createElement("table",{className:"table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("td",null,"Left Pair"),a.createElement("td",null,"Right Pair"),a.createElement("td",null,"Bonuses"),a.createElement("td",null,"Select side"))),a.createElement("tbody",null,this.state.pairs.map((e,t)=>a.createElement(i.ScoredPair,{leftPair:e.left,rightPair:e.right,score:e.scores,selectScore:(e,r)=>{this.scorePair(t,e,r)},key:t})))))}scorePair(e,t,r){let a=this.state.pairs.slice(),s=a[e].scores||{};s[t]=r,a[e].scores=s,this.setState({pairs:a})}renderScore(){let e={brain:0,cogs:0,leaf:0,math:0};for(let t of this.state.pairs)if(t.scores){switch(t.scores.basic){case n.Suit.BRAIN:e.brain++;break;case n.Suit.COG:e.cogs++;break;case n.Suit.MATH:e.math++;break;case n.Suit.LEAF:e.leaf++}switch(t.scores.bonus){case n.Suit.BRAIN:e.brain++;break;case n.Suit.COG:e.cogs++;break;case n.Suit.MATH:e.math++;break;case n.Suit.LEAF:e.leaf++}}return a.createElement(l.Score,Object.assign({},e))}}t.Board=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(0),s=r(3),n=r(1);class i extends a.Component{render(){return a.createElement("span",null,this.props.cards.map((e,t)=>a.createElement("span",{key:t},e.value,a.createElement(n.Suit,{value:e.suit}))))}}t.PairSide=i;class l extends a.Component{render(){return a.createElement("tr",null,a.createElement("td",null,a.createElement(i,{cards:this.props.leftPair})),a.createElement("td",null,a.createElement(i,{cards:this.props.rightPair})))}static validateSet(e){if(0==e.length)return!1;for(let t of e){let r=s.Card.createFromDef(t),a=[];for(let r of e)r!=t&&a.push(s.Card.createFromDef(r));if(!r.validInPair(a))return!1}return!0}static valueOfPair(e){return e.map(e=>e.value).reduce((e,t)=>e+t,0)}}t.Pair=l;class c extends a.Component{render(){return a.createElement("tr",null,a.createElement("td",null,a.createElement(i,{cards:this.props.leftPair})),a.createElement("td",null,a.createElement(i,{cards:this.props.rightPair})),a.createElement("td",null,this.renderBonuses()),a.createElement("td",null,this.renderButtons()))}renderBonuses(){return a.createElement("span",null,this.isBalancedPair()?"Balanced Pair":"No bonus")}isBalancedPair(){return this.props.leftPair.length==this.props.rightPair.length}renderButtons(){let e=this.makeButtons("basic",this.props.score?this.props.score.basic:null),t=this.isBalancedPair()?this.makeButtons("bonus",this.props.score?this.props.score.bonus:null):null;return a.createElement("div",null,e,t)}makeButtons(e,t){let r=[this.props.leftPair[0].suit];return r[0]!=this.props.rightPair[0].suit&&r.push(this.props.rightPair[0].suit),a.createElement("div",null,"Score "+e+" as:",a.createElement("div",{className:"btn-group"},r.map((r,s)=>a.createElement("button",{className:"btn btn-secondary "+(r==t?"active":""),onClick:()=>{this.props.selectScore(e,r)}},a.createElement(n.Suit,{value:r})))))}}t.ScoredPair=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(0),s=r(2),n=r(1);class i extends a.Component{render(){return a.createElement("ul",null,a.createElement("li",null,this.props.brain," ",a.createElement(n.Suit,{value:s.Suit.BRAIN})),a.createElement("li",null,this.props.cogs," ",a.createElement(n.Suit,{value:s.Suit.COG})),a.createElement("li",null,this.props.leaf," ",a.createElement(n.Suit,{value:s.Suit.LEAF})),a.createElement("li",null,this.props.math," ",a.createElement(n.Suit,{value:s.Suit.MATH})))}}t.Score=i}]);
//# sourceMappingURL=main.js.map